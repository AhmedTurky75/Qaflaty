<div>
  <label class="block text-sm font-medium text-gray-700 mb-2">
    {{ label }}
  </label>

  <!-- Custom Color Input -->
  <div class="flex items-center space-x-3 mb-4">
    <div class="relative">
      <input
        type="color"
        [formControl]="colorControl"
        (change)="onColorChange($event)"
        class="h-10 w-20 rounded border border-gray-300 cursor-pointer"
      />
    </div>

    <input
      type="text"
      [formControl]="colorControl"
      (input)="onColorChange($event)"
      placeholder="#3B82F6"
      class="flex-1 px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm font-mono uppercase"
      maxlength="7"
    />

    <!-- Preview Circle -->
    <div
      class="w-10 h-10 rounded-full border-2 border-gray-200 shadow-sm"
      [style.background-color]="selectedColor()"
    ></div>
  </div>

  <!-- Predefined Colors -->
  <div>
    <p class="text-xs font-medium text-gray-600 mb-2">Quick Colors:</p>
    <div class="grid grid-cols-6 gap-2">
      @for (color of predefinedColors; track color.value) {
        <button
          type="button"
          (click)="selectPredefinedColor(color.value)"
          class="group relative"
          [title]="color.name"
        >
          <div
            class="w-10 h-10 rounded-lg border-2 transition-all"
            [style.background-color]="color.value"
            [class.border-gray-800]="selectedColor() === color.value"
            [class.border-gray-300]="selectedColor() !== color.value"
            [class.scale-110]="selectedColor() === color.value"
            [class.shadow-lg]="selectedColor() === color.value"
          ></div>

          <!-- Selected Checkmark -->
          @if (selectedColor() === color.value) {
            <div class="absolute inset-0 flex items-center justify-center">
              <svg class="w-6 h-6 text-white drop-shadow-lg" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
              </svg>
            </div>
          }

          <!-- Tooltip -->
          <span class="absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-2 py-1 bg-gray-900 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap pointer-events-none">
            {{ color.name }}
          </span>
        </button>
      }
    </div>
  </div>

  <!-- Help Text -->
  <p class="mt-3 text-xs text-gray-500">
    This color will be used as the primary brand color for your store.
  </p>
</div>
